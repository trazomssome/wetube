# Github Login(Challenge 없음)

## 7.12 MongoStore

1. Session-Store(MongoStore)를 통해 server에 세션 정보 저장하기
   - 서버를 껐다 켜도 로그인 상태가 저장된다

## 7.13 Uninitialized Sessions

1. 모든 사용자에게 쿠키와 세션을 만들어야 하는가? No
   - 로그인한 사용자의 쿠키만 저장
   - resave :
   - saveUninitialized : 세션이 수정될 때만 세션을 DB에 저장하고 쿠키 생성

## 7.14 Expiration and Secrets

1. secret 프로퍼티
   - 쿠키에 sign할 때 사용하는 string
   - session hijack 공격을 방지
2. domain 프로퍼티
   - 어디에서 온 쿠키인지 (localhost면 localhost faceboo이면 facebook, google이면 google 등)
3. expires/Max-Age
   - 쿠키의 만기, session cookie의 경우는 브라우저 종료시 쿠키가 사라짐
   - maxAge : 쿠키 만기 기간, 1/1000초 단위
4. secret과 store url 숨기기
   - .env파일을 생성, .gitignore에 .env 추가
   - process.env.변수명으로 사용
   - dotenv를 사용해야 함.. 다음 강의에서 계속

## 7.15 Environment Variables

1. dotenv 사용
   - 앱 안에서 최대한 먼저 required('dotenv').config()를 호출
   - required("dotenv").config()를 사용하려면 모든 파일에서 호출해줘야함
   - import "dotenv/config"를 사용할 경우 init파일 등 가장 먼저 실행되는 파일에만 import
   - process.env.{keyvalue}로 사용

## 7.16 Github Login part One

1. OAuth를 통한 깃헙 로그인
   - New OAuth App 생성

## 7.17 Github Login part Two

1. user의 email 가져오기
2. 긴 url을 프로페셔널하게 사용하기 - URLSearchParams().toString();

## 7.19 Github Login part Four

1. User를 Github로 보내고 User가 승인을 누르면
2. Github는 코드를 보내주면 코드를 access token으로 바꾼다
3. access token으로 user 정보를 가져온다

## 7.20 Github Login part Five

1. token을 통해 email 데이터 가져오기
   - email중 verified되고 primary한 이메일을 가져오기
   - 중복 이메일이 존재할 경우 어떻게 처리할 지? 다음 강의에서..

## 7.21 Github Login part Six

1. github login시 기존에 이미 동일한 이메일로 가입이력이 있는 경우 처리

- password login을 강요할 수도 있고 그냥 로그인을 받아줄 수도 있다 => 받아주기

2. github login시 아이디가 DB상에 없는 경우 새로 Join하기

## 7.22 Logout

1. Code cleaning..
2. socialOnly 파라미터 활용
3. Schema에 avartaUrl 추가
4. Logout 구현
